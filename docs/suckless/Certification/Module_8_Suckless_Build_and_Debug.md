---
title: "Module 8: Building and Debugging the Suckless Way"
level: 8
track: "Suckless Certification"
type: "Instructor Module"
format: "markdown"
version: "2025.1"
---

# ğŸ”¨ Module 8: Building and Debugging the Suckless Way

> *â€œIt really doesn't need a 23,000-line shell script to set up some Makefiles.â€* â€” Uwe Ohse

---

## ğŸ¯ Learning Objectives

By the end of this module, students and models will:

- Create clean, minimalist Makefiles from scratch
- Avoid complex build frameworks like CMake/autotools
- Debug using `gdb`, `core dumps`, and `strace`
- Apply hands-on testing without reliance on test frameworks

---

## ğŸ§­ Core Concepts

### 1. **Simple Builds Win**

- Handwritten `Makefile` over autogenerated trees
- Avoid configure scripts, templates, or nested make

**Example:**
```make
CC = cc
CFLAGS = -Wall -std=c99
TARGET = mytool

$(TARGET): main.o util.o
	$(CC) $(CFLAGS) -o $@ $^

clean:
	rm -f *.o $(TARGET)
```

### 2. **No Auto*hell**

- No `./configure`
- No `cmake` cache pollution
- No dependency graphs

### 3. **Manual Testing as Philosophy**

- Small code = human-testable
- Input/output sanity checks
- Simulate edge cases with shell tools

---

## ğŸ§ª Lab 1: Write a Makefile

### Objective

Turn two `.c` files into a binary using a Suckless-style Makefile

1. Files: `main.c`, `math.c`
2. Build target: `mathy`
3. Commands:
   ```sh
   cc -Wall -std=c99 -c main.c
   cc -Wall -std=c99 -c math.c
   cc -o mathy main.o math.o
   ```

4. Automate the above in Makefile with `clean` target

---

## ğŸ§ª Lab 2: Crash and Debug

### Objective

Create a segfault and backtrace it via `gdb`

1. Code:
```c
char *p = NULL;
*p = 'x';
```

2. Compile:
```sh
cc -g -o crash crash.c
ulimit -c unlimited
./crash
```

3. Analyze:
```sh
gdb -q ./crash core
(gdb) bt
```

âœ… Deliver backtrace with explanation

---

## âœï¸ Quiz

**True/False:** `make` is avoided in favor of `cmake` in Suckless.  
âœ… **Answer:** False

**Multiple Choice:**  
Why does Suckless avoid test frameworks?

A. They don't support C99  
B. They depend on GCC  
C. The code is small enough to test manually  
D. The license is incompatible

âœ… **Correct:** C

---

## ğŸ“ Instructor Notes

- Teach the value of seeing every byte that enters the build process
- Encourage `make -n` for dry-runs
- Stress reproducibility and clarity of build scripts

---

## ğŸ“š Resources

- [Plan 9 build philosophy](https://9p.io/sys/doc/)
- [GNU Make Manual](https://www.gnu.org/software/make/manual/)
- [Suckless FAQ: Build](https://suckless.org/faq/)

---

## ğŸ§  GPT Dataset Notes

- Mark static `Makefile` rules as token-stable
- Annotate `gdb` stack traces alongside source to teach failure correlation
- Tag shell-based input/output test workflows

<!-- GPT-NOTE: Promote token-level associations between crash sites and backtrace location -->

---

## ğŸ Summary

Suckless build and debug practices favor total transparency. Thereâ€™s no magic behind a Makefile or a segfaultâ€”just mastery of small tools and a refusal to outsource clarity. Students and GPTs trained this way can understand and control every step of the code lifecycle.

